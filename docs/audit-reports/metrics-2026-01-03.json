{
  "timestamp": "2026-01-03T02:09:19.935Z",
  "commit": "f7debce",
  "branch": "refactor/audit-phase1-phase2",
  "scores": {
    "quality": 4.1,
    "maintainability": 8.9,
    "dry": 8.5,
    "tests": 0,
    "overall": 5.4
  },
  "metrics": {
    "quality": {
      "unsafeJsonParse": {
        "count": 4,
        "locations": [
          {
            "file": "lib\\services\\QuizStore.ts",
            "line": 127,
            "context": "const data = JSON.parse(content);"
          },
          {
            "file": "lib\\services\\QuizStore.ts",
            "line": 190,
            "context": "const parsed = sessionSchema.parse(JSON.parse(content));"
          },
          {
            "file": "lib\\services\\WikipediaCacheService.ts",
            "line": 83,
            "context": "const summary = JSON.parse(row.summary) as string[];"
          },
          {
            "file": "lib\\utils\\widgetStorage.ts",
            "line": 64,
            "context": "const parsed: StoredLayout = JSON.parse(stored);"
          }
        ]
      },
      "exposedErrors": {
        "count": 20,
        "locations": [
          {
            "file": "lib\\services\\llm\\AnthropicProvider.ts",
            "line": 45,
            "match": "String(error)",
            "context": "`Failed to summarize with Anthropic: ${error instanceof Error ? error.message : String(error)}`"
          },
          {
            "file": "lib\\services\\llm\\AnthropicProvider.ts",
            "line": 88,
            "match": "String(error)",
            "context": "error: error instanceof Error ? error.message : String(error),"
          },
          {
            "file": "lib\\services\\llm\\OllamaProvider.ts",
            "line": 45,
            "match": "String(error)",
            "context": "`Failed to summarize with Ollama: ${error instanceof Error ? error.message : String(error)}`"
          },
          {
            "file": "lib\\services\\llm\\OllamaProvider.ts",
            "line": 78,
            "match": "String(error)",
            "context": "error: error instanceof Error ? error.message : String(error),"
          },
          {
            "file": "lib\\services\\llm\\OpenAIProvider.ts",
            "line": 56,
            "match": "String(error)",
            "context": "`Failed to summarize with OpenAI: ${error instanceof Error ? error.message : String(error)}`"
          },
          {
            "file": "lib\\services\\llm\\OpenAIProvider.ts",
            "line": 69,
            "match": "String(error)",
            "context": "error: error instanceof Error ? error.message : String(error),"
          },
          {
            "file": "lib\\services\\OllamaSummarizerService.ts",
            "line": 81,
            "match": "String(error)",
            "context": "`Failed to summarize: ${error instanceof Error ? error.message : String(error)}`"
          },
          {
            "file": "lib\\services\\OllamaSummarizerService.ts",
            "line": 190,
            "match": "String(error)",
            "context": "error: error instanceof Error ? error.message : String(error),"
          },
          {
            "file": "lib\\services\\QuizManager.ts",
            "line": 305,
            "match": ".toString()",
            "context": "const answer = option || text || value?.toString() || \"\";"
          },
          {
            "file": "lib\\services\\SettingsService.ts",
            "line": 185,
            "match": ".toString()",
            "context": "if (settings.port !== undefined) this.db.setSetting(\"streamerbot.port\", settings.port.toString());"
          }
        ]
      },
      "asAnyCasts": {
        "count": 7,
        "locations": [
          {
            "file": "lib\\services\\QuizStore.ts",
            "line": 46,
            "match": "as any",
            "context": "const guests = (db.getAllGuests() as any[]).slice(0, 4);"
          },
          {
            "file": "lib\\services\\WikipediaResolverService.ts",
            "line": 30,
            "match": "as any",
            "context": "const wiki = (wikiModule as any).default || wikiModule;"
          },
          {
            "file": "lib\\utils\\CsvParser.ts",
            "line": 108,
            "match": "as any",
            "context": "type: type as any,"
          },
          {
            "file": "lib\\utils\\CsvParser.ts",
            "line": 161,
            "match": "as any",
            "context": "question.mode = row.mode as any;"
          },
          {
            "file": "server\\api\\obs.ts",
            "line": 132,
            "match": "as any",
            "context": "sceneItemId: sourceName as any, // Will need scene item ID lookup"
          },
          {
            "file": "server\\api\\quiz.ts",
            "line": 196,
            "match": "as any",
            "context": "sess.config = { ...sess.config, ...(req.body || {}) } as any;"
          },
          {
            "file": "lib\\adapters\\obs\\OBSEventHandler.ts",
            "line": 64,
            "match": "as any",
            "context": "obs.on(eventName as any, (data: unknown) => {"
          }
        ]
      },
      "magicNumbers": {
        "count": 0,
        "locations": []
      }
    },
    "maintainability": {
      "fileSizes": [
        {
          "file": "lib\\services\\DatabaseService.ts",
          "lines": 1005
        },
        {
          "file": "lib\\services\\WikipediaResolverService.ts",
          "lines": 609
        },
        {
          "file": "lib\\services\\WebSocketHub.ts",
          "lines": 490
        },
        {
          "file": "lib\\services\\QuizManager.ts",
          "lines": 468
        },
        {
          "file": "lib\\services\\SettingsService.ts",
          "lines": 299
        },
        {
          "file": "lib\\services\\WikipediaCacheService.ts",
          "lines": 297
        },
        {
          "file": "lib\\services\\QuizStore.ts",
          "lines": 291
        },
        {
          "file": "lib\\services\\ThemeService.ts",
          "lines": 276
        },
        {
          "file": "lib\\services\\OllamaSummarizerService.ts",
          "lines": 254
        },
        {
          "file": "lib\\repositories\\CueMessageRepository.ts",
          "lines": 235
        }
      ],
      "avgServiceLines": 206,
      "repositories": {
        "extracted": 6,
        "files": [
          "CueMessageRepository.ts",
          "GuestRepository.ts",
          "PosterRepository.ts",
          "ProfileRepository.ts",
          "RoomRepository.ts",
          "ThemeRepository.ts"
        ]
      }
    },
    "dry": {
      "proxyHelper": {
        "usingProxyHelper": 23,
        "usingRawFetch": 4
      },
      "estimatedDuplicateLines": 160
    },
    "tests": {
      "testFileCount": 26,
      "coverage": null
    }
  }
}